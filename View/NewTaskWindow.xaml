<Window x:Class="lab_1_new.View.NewTaskWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        xmlns:local="clr-namespace:lab_1_new.View" xmlns:viewmodel="clr-namespace:lab_1_new.ViewModel" d:DataContext="{d:DesignInstance Type=viewmodel:NewTaskViewModel}"
        mc:Ignorable="d"
        Title="NewTaskWindow" Height="812" Width="544"
        WindowStartupLocation="CenterScreen">
   
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="50" />
            <RowDefinition Height="200" />
            <RowDefinition Height="40" />
            <RowDefinition />
            <RowDefinition Height="40" />
            <RowDefinition Height="30" />
        </Grid.RowDefinitions>
        <Grid Margin="20 0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="150"/>
            </Grid.ColumnDefinitions>
            <TextBox x:Name="TaskTitle" Style="{StaticResource NewTaskTitle}"
                     VerticalAlignment="Center"
                     BorderBrush="{StaticResource AccentLight}"
                     BorderThickness="1"
                     Margin="0,0,19,0" 
                     Height="36" />
            <Label Content="Тема задачи..."
                   Margin="0 10"
                   Visibility="{Binding Text.IsEmpty, ElementName=TaskTitle, Converter={StaticResource BooleanToVisibilityConverter}}"
                   IsHitTestVisible="False" Cursor=""/>

            <ComboBox Grid.Column="1"
                      VerticalAlignment="Center"
                      HorizontalContentAlignment="Center"
                      Padding="0 10">
                <ComboBoxItem Content="Работа"/>
                <ComboBoxItem Content="Дом"/>
                <ComboBoxItem Content="Личное"/>
                <ComboBoxItem Content="Финансы"/>
                <ComboBoxItem Content="Здоровье"/>
                <ComboBoxItem Content="Другое"/>
            </ComboBox>
        </Grid>

        <Grid Grid.Row="1">
            <TextBox x:Name="TaskDesc" 
                     Margin="20 10 20 8"
                     Style ="{StaticResource NewTaskDesc}"
                     BorderThickness="1"
                     IsInactiveSelectionHighlightEnabled="True"
                     IsUndoEnabled="True"
                     AcceptsReturn="True"
                     FontSize="16"
                     FontWeight="Normal"
                     VerticalContentAlignment="Top"
                     HorizontalContentAlignment="Left"
                     TextAlignment="Left"/>
            <Label Content="Текст комментария..."
                    Margin="20 10 0 0"
                    Visibility="{Binding Text.IsEmpty, ElementName=TaskDesc, Converter={StaticResource BooleanToVisibilityConverter}}"
                    IsHitTestVisible="False" Cursor=""/>
        </Grid>
        <Grid Grid.Row="2" Margin="20 0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="50"/>
            </Grid.ColumnDefinitions>
            <TextBox x:Name="TaskChek" Style="{StaticResource NewTaskTitle}"
                    VerticalAlignment="Center"
                    BorderBrush="{StaticResource AccentLight}"
                    BorderThickness="1"
                    Margin="0 0 19 0" 
                    Height="36"
                    Text="{Binding NewTaskText, UpdateSourceTrigger=PropertyChanged}" Cursor="IBeam">
                <TextBox.InputBindings>
                    <KeyBinding Key="Enter" Command="{Binding AddTaskCommand}"/>
                </TextBox.InputBindings>
            </TextBox>
            <Button Style="{StaticResource Add}" Grid.Column="1" HorizontalAlignment="Center"
                    Command="{Binding AddTaskCommand}"/>
        </Grid>
        
        <Grid Grid.Row="3">
            <ListBox x:Name="ChecklistListBox"
                    Background="Transparent"
                    ItemsSource="{Binding ChecklistItems}"
                    BorderBrush="{StaticResource AccentLight}"
                    BorderThickness="1"
                    FontSize="14"
                    Margin="20 10 20 8"
                    ScrollViewer.VerticalScrollBarVisibility="Auto">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <CheckBox Content="{Binding}" 
                                    Margin="2"
                                    IsChecked="True"
                                    DockPanel.Dock="Left"/>
                            <Button Content="✕" 
                                    Margin="5 0 0 0"
                                    Command="{Binding DataContext.RemoveTaskCommand, RelativeSource={RelativeSource AncestorType=ListBox}}"
                                    CommandParameter="{Binding}"
                                    Width="20"
                                    Height="20"
                                    DockPanel.Dock="Right"
                                    Cursor="Hand"/>
                            </DockPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
             </ListBox>
        </Grid>
        
        <Grid Grid.Row="4" Margin="20 0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <TextBlock Text="Дата:"
                       Grid.Column="0"
                       VerticalAlignment="Center"
                       Margin="0 0 10 0"/>

            <DatePicker x:Name="TaskDatePicker"
                       Grid.Column="1"
                       VerticalAlignment="Center"
                       SelectedDateFormat="Short"
                       BorderBrush="{StaticResource AccentLight}"/>

            <TextBlock Text="Время:"
                       Grid.Column="2"
                       VerticalAlignment="Center"
                       Margin="10 0 10 0"/>

            <xctk:TimePicker Value="{Binding DueTime}"
                             Grid.Column="3"
                             Format="ShortTime"
                             VerticalAlignment="Center"
                             Margin="10 0 0 0"/>
        </Grid>
        <Grid Grid.Row="5" Margin="20 5 20 5">
            <Button Style="{StaticResource AddTaskButton}" Content="Добавить задачу" Cursor="Hand"/>
        </Grid>
    </Grid>
</Window>
